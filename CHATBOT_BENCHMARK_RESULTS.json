{
  "summary": {
    "total_points": 23,
    "max_points": 30,
    "score_percent": 76.67,
    "critical_issue_count": 0,
    "verdict": "NEEDS_WORK",
    "good_threshold": ">=80% score and 0 critical issues"
  },
  "requirements": [
    {
      "requirement_id": "R4.1",
      "title": "Guided Health Intake",
      "status": "PASS",
      "points": 2,
      "max_points": 2,
      "checks": [
        {
          "name": "Profile upsert works",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "status=200",
          "issue": null
        },
        {
          "name": "Profile retrieval includes clinical data",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "conditions=['type 2 diabetes', 'hypertension'] allergies=['penicillin']",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "R4.2",
      "title": "Contextual Health Conversation",
      "status": "PASS",
      "points": 2,
      "max_points": 2,
      "checks": [
        {
          "name": "Symptom response includes uncertainty framing",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "i logged these symptoms to your active record: headache, nausea. i'm sorry you're dealing with this. i can share possibilities, but i can't diagnose online. for headache, possible ",
          "issue": null
        },
        {
          "name": "Memory recall returns symptom context",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "medium",
          "evidence": "here is the clinical context i currently have: conditions: type 2 diabetes, hypertension; allergies: penicillin; medications: metformin; active symptoms: headache, nausea. tell me ",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "R4.3",
      "title": "Triage Layer",
      "status": "PARTIAL",
      "points": 1,
      "max_points": 2,
      "checks": [
        {
          "name": "Emergent input triggers emergency redirect and blocks action plan",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "critical",
          "evidence": "this may be an emergency. call 911 or local emergency services now. i will not run booking or refill actions in this context.",
          "issue": null
        },
        {
          "name": "Urgent (24h) category is explicitly surfaced",
          "passed": false,
          "points": 0,
          "max_points": 1,
          "severity": "high",
          "evidence": "i logged these symptoms to your active record: fever, dizziness. i'm sorry you're dealing with this. i can share possibilities, but i can't diagnose online. for dizziness, possible",
          "issue": "URGENT_24H triage behavior is missing or not explicit."
        }
      ]
    },
    {
      "requirement_id": "R4.4",
      "title": "Lab and Clinic Discovery",
      "status": "PASS",
      "points": 2,
      "max_points": 2,
      "checks": [
        {
          "name": "Discovery action plan is generated from booking intent + location",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "plan={'tier': 1, 'tool': 'lab_clinic_discovery', 'params': {'zip_or_geo': 'Pittsburgh, PA', 'max_distance_miles': 10, 'budget_cap': 120, 'preferred_time_window': 'next_available', 'in_network_preference': 'prefer_in_network'}, 'consent_prompt': 'I can find and rank nearby labs and clinics. Proceed?'}",
          "issue": null
        },
        {
          "name": "Discovery execution returns ranked items/options",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "medium",
          "evidence": "status=200",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "R4.5",
      "title": "Appointment Booking Workflow",
      "status": "PASS",
      "points": 4,
      "max_points": 4,
      "checks": [
        {
          "name": "Booking plan includes transactional appointment tool",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "plan={'tier': 2, 'tool': 'appointment_book', 'params': {'provider_name': 'Quest Diagnostics', 'slot_datetime': '2026-02-10T09:00:00Z', 'location': 'Pittsburgh', 'mode': 'live', 'idempotency_key': '44a671aca01d4d35932b9d3e26519fbe', 'phone': '+94125551212', 'email': 'jane@example.com', 'full_name': 'Jane Doe', 'booking_url': 'https://example.org/booking', 'consent_token': 'ctk_692410e35dc442fba904597516b25d58', 'payload_hash': '98acab6f2be7fe12d850ff12fffe8794c41a96ba0b7db59f796e6e6c32847480'}, 'consent_prompt': 'I have what I need. I can book with Quest Diagnostics at Pittsburgh for Tue Feb 10 09:00 AM. Confirm to execute.'}",
          "issue": null
        },
        {
          "name": "Booking requires explicit user confirmation",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "critical",
          "evidence": "status=400",
          "issue": null
        },
        {
          "name": "Lifecycle transitions include awaiting_confirmation and executing",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "lifecycle=['planned', 'awaiting_confirmation', 'executing', 'pending']",
          "issue": null
        },
        {
          "name": "Booking location field is not polluted with date/time fragments",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "medium",
          "evidence": "location=Pittsburgh",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "R4.6",
      "title": "Medication Refill Workflow",
      "status": "PASS",
      "points": 2,
      "max_points": 2,
      "checks": [
        {
          "name": "Refill intent creates transactional refill action plan",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "plan={'tier': 2, 'tool': 'medication_refill_request', 'params': {'medication_id': 'med_c83325ea1704e2a5e5e4', 'pharmacy_target': 'CVS', 'idempotency_key': 'c2974336c8594d6ea33213d24b488e6d', 'consent_token': 'ctk_2aac582bdd2848aa949322e389859ba5', 'payload_hash': '1e0fc597d086a8f8313accf18c1cf1c9e22a8eeb4097ece1bc340a87ff875d70'}, 'consent_prompt': 'I can prepare a refill request after your confirmation. Proceed?'}",
          "issue": null
        },
        {
          "name": "Refill execution provides run-out estimate and status",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "medium",
          "evidence": "result_keys=['action_id', 'confidence', 'errors', 'lifecycle', 'medication_id', 'medication_name', 'message', 'pharmacy_target', 'recommended_follow_up_date', 'request_execution_status', 'request_ref', 'runout_estimate', 'summary']",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "R4.7",
      "title": "Proactive Reminders and Controls",
      "status": "PARTIAL",
      "points": 1,
      "max_points": 2,
      "checks": [
        {
          "name": "Basic proactive reminder retrieval exists",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "medium",
          "evidence": "status=200",
          "issue": null
        },
        {
          "name": "Pause/snooze/resume controls are supported",
          "passed": false,
          "points": 0,
          "max_points": 1,
          "severity": "high",
          "evidence": "i noted these active symptoms: headache, nausea, fever. i cannot diagnose, but i can help assess urgency and recommend safe next steps.",
          "issue": "Reminder control commands (pause/resume/snooze) are not implemented."
        }
      ]
    },
    {
      "requirement_id": "R4.8",
      "title": "Audit, Consent, and Privacy",
      "status": "PARTIAL",
      "points": 1,
      "max_points": 2,
      "checks": [
        {
          "name": "Action/audit logs are queryable",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "items=5",
          "issue": null
        },
        {
          "name": "Privacy export/delete commands exist",
          "passed": false,
          "points": 0,
          "max_points": 1,
          "severity": "high",
          "evidence": "routes=[]",
          "issue": "Privacy export/delete commands are missing."
        }
      ]
    },
    {
      "requirement_id": "R4.9",
      "title": "Apple Health Integration",
      "status": "FAIL",
      "points": 0,
      "max_points": 2,
      "checks": [
        {
          "name": "Apple Health endpoints/toggles exist",
          "passed": false,
          "points": 0,
          "max_points": 1,
          "severity": "high",
          "evidence": "health_routes=[]",
          "issue": "Apple Health integration endpoints/toggles are missing."
        },
        {
          "name": "Advice clearly attributes use of health-signal sources",
          "passed": false,
          "points": 0,
          "max_points": 1,
          "severity": "medium",
          "evidence": "i noted these active symptoms: headache, nausea, fever. i cannot diagnose, but i can help assess urgency and recommend safe next steps.",
          "issue": "Health-signal source attribution is not explicit in chat output."
        }
      ]
    },
    {
      "requirement_id": "R4.10",
      "title": "Health Tracking Dashboard",
      "status": "FAIL",
      "points": 0,
      "max_points": 1,
      "checks": [
        {
          "name": "Dashboard data endpoint exists",
          "passed": false,
          "points": 0,
          "max_points": 1,
          "severity": "high",
          "evidence": "matching_routes=[]",
          "issue": "Health tracking dashboard API is missing."
        }
      ]
    },
    {
      "requirement_id": "R4.11",
      "title": "Voice Input",
      "status": "PASS",
      "points": 2,
      "max_points": 2,
      "checks": [
        {
          "name": "Voice transcription endpoint returns transcript",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "status=200",
          "issue": null
        },
        {
          "name": "Voice transcript flow includes triage-ready handoff metadata",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "medium",
          "evidence": "keys=['confidence', 'document_id', 'editable_transcript', 'next_step', 'requires_confirmation', 'segments', 'transcript_text', 'triage']",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "R4.12",
      "title": "Medical Document and Imaging Analysis",
      "status": "PASS",
      "points": 2,
      "max_points": 2,
      "checks": [
        {
          "name": "Document analysis returns summary/findings/follow-up questions",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "status=200",
          "issue": null
        },
        {
          "name": "Document analysis includes explicit uncertainty/safety framing",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "safety={'uncertainty': 'This is supportive information, not a diagnosis.', 'guidance': 'Follow up with your clinician for interpretation.', 'urgency_level': 'routine', 'high_risk_flags': []}",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "S6.1",
      "title": "Data Protection Principles",
      "status": "PASS",
      "points": 2,
      "max_points": 2,
      "checks": [
        {
          "name": "Clinical profile is user-scoped",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "critical",
          "evidence": "user2_profile={}",
          "issue": null
        },
        {
          "name": "Web automation URL normalization blocks localhost/private targets",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "high",
          "evidence": "normalize_url(http://localhost:8080/book)",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "S6.2",
      "title": "Consent and Action Safety",
      "status": "PASS",
      "points": 1,
      "max_points": 1,
      "checks": [
        {
          "name": "Transactional action is blocked without consent token",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "critical",
          "evidence": "status=200 payload={'status': 'failure', 'result': {'summary': 'Booking request submitted', 'errors': [{'code': 'missing_consent_token', 'message': 'Consent token required for transactional action.'}], 'lifecycle': ['planned', 'awaiting_confirmation', 'blocked'], 'action_id': '0cd1211beff14a6fb632f1961e1f8824', 'message': 'Consent token required for transactional action.'}}",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "S6.3",
      "title": "Abuse and Leakage Prevention",
      "status": "PASS",
      "points": 1,
      "max_points": 1,
      "checks": [
        {
          "name": "Broad memory dump prompts are blocked",
          "passed": true,
          "points": 1,
          "max_points": 1,
          "severity": "critical",
          "evidence": "i can\u2019t provide a broad memory dump. ask for a specific section instead.",
          "issue": null
        }
      ]
    },
    {
      "requirement_id": "S6.4",
      "title": "Incident Safety Mode",
      "status": "FAIL",
      "points": 0,
      "max_points": 1,
      "checks": [
        {
          "name": "Safety-mode controls exist",
          "passed": false,
          "points": 0,
          "max_points": 1,
          "severity": "high",
          "evidence": "safety_routes=[]",
          "issue": "Incident safety mode controls are missing."
        }
      ]
    }
  ],
  "issues": [
    {
      "requirement_id": "R4.10",
      "title": "Health Tracking Dashboard",
      "check": "Dashboard data endpoint exists",
      "severity": "high",
      "issue": "Health tracking dashboard API is missing.",
      "evidence": "matching_routes=[]"
    },
    {
      "requirement_id": "R4.3",
      "title": "Triage Layer",
      "check": "Urgent (24h) category is explicitly surfaced",
      "severity": "high",
      "issue": "URGENT_24H triage behavior is missing or not explicit.",
      "evidence": "i logged these symptoms to your active record: fever, dizziness. i'm sorry you're dealing with this. i can share possibilities, but i can't diagnose online. for dizziness, possible"
    },
    {
      "requirement_id": "R4.7",
      "title": "Proactive Reminders and Controls",
      "check": "Pause/snooze/resume controls are supported",
      "severity": "high",
      "issue": "Reminder control commands (pause/resume/snooze) are not implemented.",
      "evidence": "i noted these active symptoms: headache, nausea, fever. i cannot diagnose, but i can help assess urgency and recommend safe next steps."
    },
    {
      "requirement_id": "R4.8",
      "title": "Audit, Consent, and Privacy",
      "check": "Privacy export/delete commands exist",
      "severity": "high",
      "issue": "Privacy export/delete commands are missing.",
      "evidence": "routes=[]"
    },
    {
      "requirement_id": "R4.9",
      "title": "Apple Health Integration",
      "check": "Apple Health endpoints/toggles exist",
      "severity": "high",
      "issue": "Apple Health integration endpoints/toggles are missing.",
      "evidence": "health_routes=[]"
    },
    {
      "requirement_id": "S6.4",
      "title": "Incident Safety Mode",
      "check": "Safety-mode controls exist",
      "severity": "high",
      "issue": "Incident safety mode controls are missing.",
      "evidence": "safety_routes=[]"
    },
    {
      "requirement_id": "R4.9",
      "title": "Apple Health Integration",
      "check": "Advice clearly attributes use of health-signal sources",
      "severity": "medium",
      "issue": "Health-signal source attribution is not explicit in chat output.",
      "evidence": "i noted these active symptoms: headache, nausea, fever. i cannot diagnose, but i can help assess urgency and recommend safe next steps."
    }
  ]
}